from employee import Employee
class User:
    """
    User hệ thống
    role:
    - admin: quản trị viên
    - staff: nhân viên
    """
    def __init__(self, username, role):
        self.username = username
        self.role = role


class EmployeeManagement:
    def __init__(self):
        self.employees = {}

    def add_employee(self, employee):
        self.employees[employee.emp_id] = employee

    def view_salary_info(self, user, emp_id):
        """
        AC: Chỉ admin được xem thông tin lương
        """
        if user.role != "admin":
            print("[!] Bạn không có quyền xem thông tin lương.")
            return

        emp = self.employees.get(emp_id)
        if not emp:
            print("[!] Không tìm thấy nhân viên.")
            return

        print("=== THÔNG TIN LƯƠNG ===")
        print(f"Họ tên: {emp.name}")
        print(f"Vị trí: {emp.position}")
        print(f"Lương cơ bản: {emp.base_salary}")
        print(f"Tỷ lệ hoa hồng: {emp.commission_rate * 100}%")

    def update_salary(self, user, emp_id, new_salary, new_position):
        """
        AC: Chỉ admin được chỉnh sửa lương
        """
        if user.role != "admin":
            print("[!] Chỉ quản trị viên mới có quyền chỉnh sửa lương.")
            return

        emp = self.employees.get(emp_id)
        if not emp:
            print("[!] Không tìm thấy nhân viên.")
            return

        emp.update_salary_and_position(new_salary, new_position)
        print("[+] Cập nhật lương/vị trí thành công.")
