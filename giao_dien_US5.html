<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Quản lý Đổi/Trả hàng - US05</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background-color: #f0f2f5; }
        .container { max-width: 800px; margin: auto; background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h2 { color: #d9534f; border-bottom: 2px solid #d9534f; padding-bottom: 10px; }
        
        /* Phần tìm kiếm - Công việc 1 */
        .search-box { margin-bottom: 25px; padding: 15px; background: #fff5f5; border: 1px solid #ffc1c1; border-radius: 5px; }
        input[type="text"] { padding: 8px; width: 250px; border: 1px solid #ccc; }
        
        /* Kết quả đơn hàng - Công việc 3 & 4 */
        .result-section { display: none; margin-top: 20px; padding: 15px; border: 1px dashed #aaa; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background: #f8f9fa; }

        .btn { padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; color: white; }
        .btn-search { background: #007bff; }
        .btn-return { background: #d9534f; } /* Nút Trả hàng */
        .btn-exchange { background: #f0ad4e; } /* Nút Đổi hàng */
    </style>
</head>
<body>

<div class="container">
    <h2>Hệ thống Đổi/Trả hàng (US05)</h2>

    <div class="search-box">
        <strong>Nhập mã đơn hàng:</strong>
        <input type="text" id="orderId" placeholder="Ví dụ: HD001...">
        <button class="btn btn-search" onclick="timDonHang()">Tìm kiếm</button>
    </div>

    <div id="resultSection" class="result-section">
        <h3>Thông tin đơn hàng: <span id="displayId"></span></h3>
        <table>
            <thead>
                <tr>
                    <th>Sản phẩm</th>
                    <th>Số lượng</th>
                    <th>Giá trị</th>
                    <th>Hành động</th>
                </tr>
            </thead>
            <tbody id="orderItems">
                </tbody>
        </table>

        <div style="margin-top: 20px; background: #eee; padding: 10px;">
            <strong>Số tiền hoàn lại/thu thêm: </strong>
            <span id="amountDiff" style="color: red; font-weight: bold;">0đ</span>
        </div>
        <br>
        <button class="btn btn-return" onclick="xuly(1)">Xác nhận Trả hàng (Cộng kho)</button>
        <button class="btn btn-exchange" onclick="xuly(2)">Xác nhận Đổi hàng (Tính chênh lệch)</button>
    </div>
</div>

<script>
    function timDonHang() {
        const id = document.getElementById("orderId").value;
        if(id === "") { alert("Vui lòng nhập mã!"); return; }

        // Hiện phần xử lý
        document.getElementById("resultSection").style.display = "block";
        document.getElementById("displayId").innerText = id;
        
        // Đổ dữ liệu giả lập vào bảng
        const tbody = document.getElementById("orderItems");
        tbody.innerHTML = `
            <tr>
                <td>Áo Thun Nam</td>
                <td>1</td>
                <td>200.000đ</td>
                <td><input type="checkbox" checked> Chọn đổi/trả</td>
            </tr>
        `;
    }

    // Công việc 2 & 4: Cộng kho và lưu lịch sử
    function xuly(loai) {
        if(loai === 1) {
            alert("Đã cộng lại số lượng vào tồn kho và lưu lịch sử Trả hàng!");
        } else {
            alert("Đã tính phí chênh lệch và cập nhật trạng thái Đổi hàng!");
        }
    }
</script>

</body>
</html>