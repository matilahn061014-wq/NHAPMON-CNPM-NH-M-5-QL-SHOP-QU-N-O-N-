<!--us7-->
<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>US7 - Sửa Sản Phẩm</title>

<style>
body{
    background:#f5f6fa;
    font-family:Arial;
    padding:40px
}
.container{
    background:#fff;
    max-width:650px;
    margin:auto;
    padding:25px;
    border-radius:10px;
    box-shadow:0 2px 10px rgba(0,0,0,.15)
}
h2{margin-bottom:10px}
label{font-weight:bold}
input,textarea,select{
    width:100%;
    padding:9px;
    border-radius:6px;
    border:1px solid #ccc;
    margin-top:5px;
    margin-bottom:12px;
}
button{
    padding:10px 18px;
    border:0;
    border-radius:6px;
    cursor:pointer;
    font-size:15px;
}
.save{background:#0d6efd;color:white}
.cancel{background:#6c757d;color:white;margin-left:10px}
.success{color:#0fa34a;font-weight:bold}
.error{color:#d93025;font-weight:bold}
</style>
</head>

<body>

<div class="container">
    <h2>✏️ Sửa sản phẩm</h2>

    <!-- Form chỉnh sửa -->
    <form id="productForm">
        <label>Tên sản phẩm</label>
        <input id="name">

        <label>Giá</label>
        <input type="number" id="price">

        <label>Tồn kho</label>
        <input type="number" id="stock">

        <label>Phiên bản</label>
        <select id="variant">
            <option>Size S</option>
            <option>Size M</option>
            <option>Size L</option>
        </select>

        <label>Mô tả</label>
        <textarea id="description"></textarea>

        <button type="button" class="save" onclick="saveProduct()">Lưu</button>
        <button type="button" class="cancel" onclick="cancelEdit()">Hủy</button>
    </form>

    <p id="message"></p>
</div>

<script>
// ====== DỮ LIỆU GỐC (GIẢ LẬP DB) ======
const originalProduct = {
    name:"Áo thun nam",
    price:199000,
    stock:50,
    variant:"Size M",
    description:"Áo thun cotton thoáng mát"
};

// Load dữ liệu ban đầu
function loadProduct(data){
    nameInput.value = data.name;
    priceInput.value = data.price;
    stockInput.value = data.stock;
    variantInput.value = data.variant;
    descInput.value = data.description;
}

// Input refs
const nameInput = document.getElementById("name");
const priceInput = document.getElementById("price");
const stockInput = document.getElementById("stock");
const variantInput = document.getElementById("variant");
const descInput = document.getElementById("description");
const msg = document.getElementById("message");

// Validate
function validate(){
    if(nameInput.value.trim() === "")
        return "Tên sản phẩm không được để trống";
    if(priceInput.value <= 0)
        return "Giá phải lớn hơn 0";
    if(stockInput.value < 0)
        return "Tồn kho không hợp lệ";
    return "";
}

// Lưu
function saveProduct(){
    const error = validate();
    if(error){
        msg.className="error";
        msg.innerText="❌ " + error;
        return;
    }

    setTimeout(()=>{
        msg.className="success";
        msg.innerText="✅ Cập nhật sản phẩm thành công!";
    },600);
}

// Hủy sửa
function cancelEdit(){
    loadProduct(originalProduct);
    msg.className="";
    msg.innerText="❗ Đã hủy, dữ liệu trở về ban đầu";
}

// Khởi tạo
loadProduct(originalProduct);
</script>

</body>
</html>
